>生产者、消费者模式被广泛的运用在解耦、消息队列场景中。使用生产者和消费者模式，通常在他们之间增加一个阻塞队列作为媒介，有了媒介之后，相当于有了一个缓冲，平衡了两者之间的能力。

# 生产者消费者模式设计
如图所示，生产者线程会向阻塞队里面加数据，满了则阻塞，而消费者线程会向阻塞队里里面取出数据。阻塞队列的作用就是平衡图中3和4的过程。
![生产者消费者模式（图片来源于拉勾）.png](https://upload-images.jianshu.io/upload_images/9905084-6740a4732e015e56.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

# 生产者、消费者模式的实现
## 利用BlockingQueue实现
代码如下所示，表面上看起来简单，实际上BlockingQueue给我们做了很多工作，比如队列满了就去阻塞生产者线程，队列有空就去唤醒生产者线程等。
```
public class BlockingQueueDemo1 {

    public static void main(String[] args) {
        //创建ArrayBlockingQueue类型的BlockingQueue
        BlockingQueue<Object> arrayQueue = new ArrayBlockingQueue<>(10);

        Runnable producer = () -> {
            while (true) {
                try {
                    //生产者往队列中存放数据
                    log.info("execute arrayQueue put......");
                    arrayQueue.put(new Object());
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        };

        //启动两个生产者线程
        new Thread(producer).start();
        new Thread(producer).start();

        Runnable customer = () -> {
            while (true) {
                try {
                    log.info("execute arrayQueue take......");
                    //消费者从队列中取出数据
                    arrayQueue.take();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        };

        //启动两个消费者线程
        new Thread(customer).start();
        new Thread(customer).start();
    }
}
```
